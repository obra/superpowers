---
name: automated-development-workflow
description: Use when you need to automate daily git workflow - code checks, commits, pushes, and merges in a single branch environment. ä¸­æ–‡è§¦å‘åœºæ™¯ï¼šå½“ç”¨æˆ·è¯´"ä¸‹ç­äº†"ã€"æäº¤ä»£ç "ã€"ä»Šå¤©çš„ä»£ç å¯ä»¥æäº¤äº†å—ï¼Ÿ"ã€"æ‰§è¡Œæ¯æ—¥å·¥ä½œæµ"ã€"å¿«é€Ÿæäº¤"ã€"åˆå¹¶åˆ° develop"ã€"åŒæ­¥åˆ†æ”¯"ç­‰éœ€è¦è‡ªåŠ¨åŒ– Git å·¥ä½œæµæ—¶ä½¿ç”¨æ­¤æŠ€èƒ½ã€‚
---

# è‡ªåŠ¨åŒ–å¼€å‘å·¥ä½œæµ

## Overview

è‡ªåŠ¨åŒ–æ—¥å¸¸å¼€å‘ä¸­çš„ Git æ“ä½œï¼ŒåŒ…æ‹¬ä»£ç æ£€æŸ¥ã€æäº¤ã€æ¨é€å’Œåˆå¹¶ã€‚è¿™æ˜¯ `using-git-worktrees` çš„æ›¿ä»£æ–¹æ¡ˆï¼Œé€‚
ç”¨äºå•ä¸€åˆ†æ”¯é¡ºåºå¼€å‘çš„åœºæ™¯ã€‚

**æ ¸å¿ƒåŸåˆ™ï¼š** æ£€æŸ¥ä»£ç  â†’ ç”Ÿæˆæäº¤ â†’ æ‰§è¡Œæ¨é€ â†’ é€‰æ‹©ä¸‹ä¸€æ­¥

**å¼€å§‹æ—¶å£°æ˜ï¼š** "æˆ‘æ­£åœ¨ä½¿ç”¨è‡ªåŠ¨åŒ–å¼€å‘å·¥ä½œæµæŠ€èƒ½..." (I'm using the automated-development-workflow skill...)

**é€‚ç”¨åœºæ™¯ï¼š** ä¸ªäººå¼€å‘è€…æ¨¡å¼ï¼ˆ`development_mode: personal`ï¼‰ä¸‹çš„æ™®é€šåˆ†æ”¯å·¥ä½œæµ

`â˜… Insight â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`
**è¿™ä¸ªæŠ€èƒ½çš„æ ¸å¿ƒè®¾è®¡ç†å¿µ**ï¼š
1. **ä¸ using-git-worktrees çš„å…³ç³»**ï¼šä¸¤è€…äº’è¡¥ - worktree ç”¨äºå¹¶è¡Œå¤šåˆ†æ”¯å¼€å‘ï¼Œæ­¤æŠ€èƒ½ç”¨äºå•åˆ†æ”¯å¿«é€Ÿè¿­ä»£
2. **é…ç½®æ„ŸçŸ¥**ï¼šé€šè¿‡æ£€æµ‹ session context ä¸­çš„ `<config-detected>` æ ‡è®°æ¥è·å–å½“å‰é…ç½®ï¼ˆå¦‚ `completion_strategy`ã€`develop_branch` ç­‰ï¼‰
3. **æ™ºèƒ½å†²çªè§£å†³**ï¼šæ ¹æ®æ–‡ä»¶ç±»å‹è‡ªåŠ¨åº”ç”¨ä¸åŒçš„åˆå¹¶ç­–ç•¥ï¼ˆpackage.json åˆå¹¶ã€ä»£ç æ–‡ä»¶åŸºç¡€è®¾æ–½ä¼˜å…ˆç­‰ï¼‰
`â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`

## The Process

### æ­¥éª¤ 1ï¼šæ˜¾ç¤ºå½“å‰çŠ¶æ€

**é¦–å…ˆæ”¶é›†å¹¶æ˜¾ç¤ºå½“å‰ä»“åº“çŠ¶æ€ï¼š**

```bash
# è·å–å½“å‰åˆ†æ”¯
git branch --show-current

# è·å–æœªæäº¤æ›´æ”¹
git status --short

# è·å–æœ€è¿‘æäº¤å†å²ï¼ˆæœ€è¿‘ 3 æ¡ï¼‰
git log --oneline -3
```

**è¾“å‡ºæ ¼å¼ï¼š**

```
ğŸ“Š å½“å‰å·¥ä½œåŒºçŠ¶æ€

åˆ†æ”¯ï¼šfeat/user-auth
æœªæäº¤æ›´æ”¹ï¼š3 ä¸ªæ–‡ä»¶
  M  src/auth.ts (ä¿®æ”¹)
  ?? src/utils/token.ts (æ–°å¢)
  M  README.md (ä¿®æ”¹)

æœ€è¿‘æäº¤ï¼š
  c48ef3b fix: æ‰¹é‡ä¿®å¤æ‹¼å†™é”™è¯¯
  393a3be fix: ä¿®å¤å‘½åå’Œé…ç½®æ–‡ä»¶ç›¸å…³çš„é—æ¼é—®é¢˜
  ddf5fe5 chore: é…ç½®æ–‡ä»¶å‘½åä» superpowers æ”¹ä¸º horspowers

æŒ‰å›è½¦ç»§ç»­...
```

**å¦‚æœæ²¡æœ‰æœªæäº¤æ›´æ”¹ï¼š**

```
å½“å‰å·¥ä½œåŒºæ˜¯å¹²å‡€çš„ï¼ˆæ— æœªæäº¤æ›´æ”¹ï¼‰

é€‰é¡¹ï¼š
1. æ‰§è¡Œåˆ†æ”¯æ“ä½œï¼ˆåŒæ­¥ã€åˆå¹¶ã€åˆ›å»ºåˆ†æ”¯ç­‰ï¼‰
2. ç»“æŸå·¥ä½œæµ

è¯·é€‰æ‹©ï¼š
```

### æ­¥éª¤ 2ï¼šæ‰§è¡Œä»£ç è´¨é‡æ£€æŸ¥ï¼ˆå¯é€‰ï¼‰

**è¯»å–é…ç½®æ£€æŸ¥æ˜¯å¦å¯ç”¨ï¼š**

ä» session context ä¸­æŸ¥æ‰¾ `<config-detected>` æ ‡è®°ï¼Œè·å–é…ç½®ï¼š
- `checks.typeCheck.enabled` - ç±»å‹æ£€æŸ¥æ˜¯å¦å¯ç”¨
- `checks.typeCheck.command` - ç±»å‹æ£€æŸ¥å‘½ä»¤ï¼ˆé»˜è®¤ï¼š`npm run type-check`ï¼‰
- `checks.lint.enabled` - Lint æ£€æŸ¥æ˜¯å¦å¯ç”¨
- `checks.lint.command` - Lint æ£€æŸ¥å‘½ä»¤ï¼ˆé»˜è®¤ï¼š`npm run lint`ï¼‰
- `checks.test.enabled` - æµ‹è¯•æ˜¯å¦å¯ç”¨

**å¦‚æœæœªæ‰¾åˆ°é…ç½®æˆ–æ£€æŸ¥æœªå¯ç”¨ï¼Œè·³è¿‡æ­¤æ­¥éª¤ï¼Œç›´æ¥è¿›å…¥æ­¥éª¤ 3ã€‚**

**å¦‚æœæ£€æŸ¥å¯ç”¨ï¼Œæ‰§è¡Œï¼š**

```
ğŸ” æ­¥éª¤ 2ï¼šä»£ç è´¨é‡æ£€æŸ¥

æ­£åœ¨è¿è¡Œç±»å‹æ£€æŸ¥...
<type-check-command è¾“å‡º>

æ­£åœ¨è¿è¡Œ Lint æ£€æŸ¥...
<lint-command è¾“å‡º>

âœ“ æ‰€æœ‰æ£€æŸ¥é€šè¿‡

æŒ‰å›è½¦ç»§ç»­...
```

**å¦‚æœæ£€æŸ¥å¤±è´¥ï¼š**

```
âŒ ç±»å‹æ£€æŸ¥å¤±è´¥ï¼ˆ3 ä¸ªé”™è¯¯ï¼‰

src/auth.ts:10:5
  error TS2322: Type 'unknown' is not assignable to type 'string'

ğŸ’¡ å»ºè®®æ“ä½œï¼š
1. æŸ¥çœ‹å®Œæ•´é”™è¯¯è¯¦æƒ…
2. å°è¯•ç»§ç»­æäº¤ï¼ˆä¸æ¨èï¼‰
3. å–æ¶ˆå·¥ä½œæµ

è¯·é€‰æ‹©ï¼ˆè¾“å…¥æ•°å­—ï¼‰ï¼š
```

### æ­¥éª¤ 3ï¼šåˆ†ææ›´æ”¹å¹¶ç”Ÿæˆ Commit Message

**åˆ†ææ›´æ”¹å†…å®¹ï¼š**

```bash
# è·å–æ–‡ä»¶åˆ—è¡¨å’Œ diff
git diff --cached --name-status 2>/dev/null || git diff --name-status
git diff --cached 2>/dev/null || git diff
```

**ç¡®å®šæäº¤ç±»å‹ï¼š**

åŸºäºä»¥ä¸‹è§„åˆ™è‡ªåŠ¨åˆ¤æ–­ï¼š

| æ›´æ”¹å†…å®¹ | ç±»å‹ | è¯´æ˜ |
|---------|------|------|
| æ–°å¢å¯¼å‡º/å‡½æ•°/ç±» | `feat` | æ–°åŠŸèƒ½ |
| åŒ…å« "fix" æˆ– "bug" | `fix` | Bug ä¿®å¤ |
| ä¿®æ”¹ .md æ–‡ä»¶ | `docs` | æ–‡æ¡£æ›´æ–° |
| åŒ…å« "refactor" æˆ– "ä¼˜åŒ–" | `refactor` | é‡æ„ |
| æµ‹è¯•æ–‡ä»¶ä¿®æ”¹ | `test` | æµ‹è¯•ç›¸å…³ |
| æ€§èƒ½æ”¹è¿› | `perf` | æ€§èƒ½ä¼˜åŒ– |
| ä»£ç æ ¼å¼è°ƒæ•´ | `style` | ä»£ç é£æ ¼ |
| å…¶ä»– | `chore` | æ‚é¡¹ |

**ç¡®å®šèŒƒå›´ï¼ˆscopeï¼‰ï¼š**

æ ¹æ®æ–‡ä»¶è·¯å¾„è‡ªåŠ¨æ¨æ–­ï¼š
- `types/` â†’ `types`
- `config/` â†’ `config`
- `logger/` æˆ– `log` â†’ `logger`
- `test/` æˆ– `spec` â†’ `test`
- `auth/` æˆ– `login` â†’ `auth`

**ç”Ÿæˆä¸»é¢˜ï¼š**

ä» diff ä¸­æå–å…³é”®å˜æ›´ï¼Œç”Ÿæˆç®€æ´çš„ä¸»é¢˜è¡Œã€‚

**è¾“å‡ºæ ¼å¼ï¼š**

```
ğŸ“ æ­¥éª¤ 3ï¼šåˆ†ææ›´æ”¹å¹¶ç”Ÿæˆ Commit Message

åˆ†ææ›´æ”¹å†…å®¹...
  - æ–°å¢ token ç®¡ç†å·¥å…·
  - ä¿®æ”¹è®¤è¯é€»è¾‘
  - æ›´æ–°æ–‡æ¡£

è‡ªåŠ¨ç”Ÿæˆçš„ commit messageï¼š

feat(auth): æ·»åŠ  JWT token ç®¡ç†

- æ–°å¢ TokenManager ç±»
- å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½
- æ›´æ–° README æ–‡æ¡£

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

é€‰é¡¹ï¼š
1. ä½¿ç”¨æ­¤ commit message
2. ç¼–è¾‘ commit message
3. é‡æ–°ç”Ÿæˆ
4. æŸ¥çœ‹è¯¦ç»† diff

è¯·é€‰æ‹©ï¼š
```

### æ­¥éª¤ 4ï¼šç”¨æˆ·ç¡®è®¤å¹¶æäº¤

**å¦‚æœç”¨æˆ·é€‰æ‹©ä½¿ç”¨ï¼š**

```bash
# æ·»åŠ æ‰€æœ‰æ›´æ”¹
git add -A

# æ‰§è¡Œæäº¤ï¼ˆä½¿ç”¨ HEREDOC ç¡®ä¿æ ¼å¼æ­£ç¡®ï¼‰
git commit -m "$(cat <<'EOF'
feat(auth): æ·»åŠ  JWT token ç®¡ç†

- æ–°å¢ TokenManager ç±»
- å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½
- æ›´æ–° README æ–‡æ¡£

Co-Authored-By: Claude <noreply@anthropic.com>
EOF
)"

# æ¨é€åˆ°è¿œç¨‹
git push
```

**è¾“å‡ºï¼š**

```
âœ… æäº¤æˆåŠŸ

åˆ†æ”¯ï¼šfeat/user-auth
æäº¤ï¼šfeat(auth): æ·»åŠ  JWT token ç®¡ç†
è¿œç¨‹ï¼šå·²æ¨é€åˆ° origin

æŒ‰å›è½¦ç»§ç»­...
```

**å¦‚æœç”¨æˆ·é€‰æ‹©ç¼–è¾‘ï¼š**
- å…è®¸ç”¨æˆ·è¾“å…¥è‡ªå®šä¹‰çš„ commit message
- ç¡®è®¤åæ‰§è¡Œæäº¤å’Œæ¨é€

### æ­¥éª¤ 5ï¼šè¯¢é—®ä¸‹ä¸€æ­¥æ“ä½œ

**è¯»å–é…ç½®ç¡®å®šæ¨èé€‰é¡¹ï¼š**

ä» session context ä¸­è·å–ï¼š
- `completion_strategy` - `merge` | `pr` | `keep`
- `autoMerge.enabled` - æ˜¯å¦è‡ªåŠ¨åˆå¹¶
- `autoMerge.targetBranch` - ç›®æ ‡åˆ†æ”¯ï¼ˆé»˜è®¤ï¼š`develop`ï¼‰
- `develop_branch` - å¼€å‘åˆ†æ”¯åç§°ï¼ˆå§‹ç»ˆä¸º `develop`ï¼‰

**æ˜¾ç¤ºé€‰é¡¹ï¼š**

```
âœ¨ ä»£ç å·²æäº¤ï¼æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ

æ ¹æ®å½“å‰é…ç½®ï¼Œæ¨èï¼š<<åŸºäºé…ç½®>>

1. ğŸ”„ åˆå¹¶åˆ° <<develop_branch>> ï¼ˆæ¨èï¼‰
2. ğŸ”— åˆ›å»º Pull Request
3. ğŸŒ¿ ä¿ç•™å½“å‰åˆ†æ”¯
4. ğŸ ç»“æŸå·¥ä½œæµ
5. â• å…¶ä»–æ“ä½œï¼ˆåŒæ­¥åˆ†æ”¯ã€è§£å†³å†²çªç­‰ï¼‰

è¯·é€‰æ‹©ï¼š
```

**é…ç½®ä¸æ¨èé€‰é¡¹æ˜ å°„ï¼š**

| completion_strategy | ä¸ªäººæ¨¡å¼æ¨è |
|---------------------|-------------|
| `merge` | é€‰é¡¹ 1ï¼ˆåˆå¹¶ï¼‰ âœ¨ |
| `keep` | é€‰é¡¹ 3ï¼ˆä¿ç•™ï¼‰ âœ¨ |
| `pr` | é€‰é¡¹ 2ï¼ˆåˆ›å»º PRï¼‰ âœ¨ |
| æœªè®¾ç½® | é€‰é¡¹ 1ï¼ˆåˆå¹¶ï¼‰ âœ¨ |

## å­æµç¨‹ï¼šåˆå¹¶åˆ° Develop/Main

**è§¦å‘æ¡ä»¶ï¼š**
- ç”¨æˆ·åœ¨æ­¥éª¤ 5 é€‰æ‹©é€‰é¡¹ 1
- ç”¨æˆ·è¯´"åˆå¹¶åˆ° develop"ã€"åˆå¹¶ä»£ç "ç­‰

### æ­¥éª¤ 1ï¼šæ£€æŸ¥å½“å‰åˆ†æ”¯çŠ¶æ€

```bash
# ç¡®ä¿å½“å‰åˆ†æ”¯å·²æ¨é€
git status

# æ£€æŸ¥æ˜¯å¦æœ‰æœªæ¨é€çš„æäº¤
git log origin/$(git branch --show-current)..HEAD
```

### æ­¥éª¤ 2ï¼šåˆ‡æ¢åˆ°ç›®æ ‡åˆ†æ”¯

**å®‰å…¨åŸåˆ™ï¼š** æ‰€æœ‰åŠŸèƒ½åˆ†æ”¯åˆå¹¶åˆ° developï¼Œè€Œä¸æ˜¯ç›´æ¥åˆå¹¶åˆ° mainã€‚

```bash
# åˆ‡æ¢åˆ° develop åˆ†æ”¯ï¼ˆå®‰å…¨ç›®æ ‡ï¼‰
git checkout develop

# æ‹‰å–æœ€æ–°ä»£ç 
git pull
```

### æ­¥éª¤ 3ï¼šåˆå¹¶åŠŸèƒ½åˆ†æ”¯

```bash
# è·å–åŸåˆ†æ”¯å
FEATURE_BRANCH=$(git rev-parse --abbrev-ref HEAD@{1})

# æ‰§è¡Œåˆå¹¶
git merge $FEATURE_BRANCH
```

### æ­¥éª¤ 4ï¼šå¤„ç†å†²çªï¼ˆå¦‚æœæœ‰ï¼‰

**æ£€æµ‹å†²çªï¼š**

```bash
# æ£€æŸ¥æ˜¯å¦æœ‰å†²çª
git diff --name-only --diff-filter=U
```

**å¦‚æœæœ‰å†²çªï¼ŒæŒ‰æ–‡ä»¶ç±»å‹æ™ºèƒ½è§£å†³ï¼š**

```
âš ï¸  æ£€æµ‹åˆ°å†²çªï¼

å†²çªæ–‡ä»¶ï¼ˆ2ï¼‰ï¼š
1. package.json
2. src/utils/logger.ts

ğŸ” æ™ºèƒ½å†²çªè§£å†³ç­–ç•¥ï¼š
âœ“ package.json - å·²è‡ªåŠ¨åˆå¹¶ï¼ˆåˆå¹¶åŒæ–¹ scriptsï¼‰
âœ“ logger.ts - å·²é‡‡ç”¨å½“å‰åˆ†æ”¯ç‰ˆæœ¬

æ˜¯å¦ç»§ç»­åˆå¹¶ï¼Ÿ(y/n/æ‰‹åŠ¨è§£å†³)
```

**å†²çªè§£å†³è§„åˆ™ï¼š**

| æ–‡ä»¶ç±»å‹ | ç­–ç•¥ | è¯´æ˜ |
|---------|------|------|
| `package.json` | `merge` | åˆå¹¶åŒæ–¹çš„ scripts å’Œä¾èµ– |
| TypeScript/JavaScript | `infra-priority` | ä¿ç•™åŸºç¡€è®¾æ–½ç‰ˆæœ¬ï¼ˆå½“å‰åˆ†æ”¯ï¼‰ |
| `*.md` | `ours` | ä¿ç•™å½“å‰åˆ†æ”¯ï¼ˆæ–‡æ¡£é€šå¸¸æ¥è‡ªåŠŸèƒ½åˆ†æ”¯ï¼‰ |
| `test/*` | `theirs` | ä¿ç•™ä¼ å…¥ç‰ˆæœ¬ï¼ˆæµ‹è¯•åº”è·Ÿéšä¸»åˆ†æ”¯ï¼‰ |
| å…¶ä»– | è¯¢é—®ç”¨æˆ· | è®©ç”¨æˆ·å†³å®š |

**package.json åˆå¹¶è„šæœ¬ï¼ˆä½¿ç”¨ git merge-fileï¼‰ï¼š**

```bash
# æ£€æµ‹åˆ° package.json å†²çªæ—¶
git show --theirs:package.json > /tmp/theirs.json
git show --ours:package.json > /tmp/ours.json
git show --ancestor:package.json >tmp/ancestor.json

git merge-file /tmp/ours.json /tmp/ancestor.json /tmp/theirs.json
cp /tmp/ours.json package.json
git add package.json
```

**ä»£ç æ–‡ä»¶åŸºç¡€è®¾æ–½ä¼˜å…ˆï¼š**

```bash
# ä¿ç•™å½“å‰åˆ†æ”¯ç‰ˆæœ¬
git checkout --ours path/to/file.ts
git add path/to/file.ts
```

### æ­¥éª¤ 5ï¼šæ¨é€ç›®æ ‡åˆ†æ”¯

```bash
# æ¨é€åˆå¹¶åçš„åˆ†æ”¯
git push

# å¯é€‰ï¼šåˆ é™¤åŠŸèƒ½åˆ†æ”¯
git branch -d $FEATURE_BRANCH
git push origin --delete $FEATURE_BRANCH
```

**è¯¢é—®æ˜¯å¦åˆ é™¤åŠŸèƒ½åˆ†æ”¯ï¼š**

```
âœ… åˆå¹¶å®Œæˆï¼

å·²å°† <<feature-branch>> åˆå¹¶åˆ° <<target-branch>>

æ˜¯å¦åˆ é™¤åŠŸèƒ½åˆ†æ”¯ <<feature-branch>>ï¼Ÿ(y/n)
```

## å­æµç¨‹ï¼šå¿«é€Ÿæäº¤

**è§¦å‘æ¡ä»¶ï¼š**
- ç”¨æˆ·è¯´"å¿«é€Ÿæäº¤"ã€"è·³è¿‡æ£€æŸ¥ç›´æ¥æäº¤"ã€`/quick-commit`

### æµç¨‹

```
ğŸš€ å¿«é€Ÿæäº¤æ¨¡å¼

è·³è¿‡æ‰€æœ‰è´¨é‡æ£€æŸ¥...

å½“å‰æ›´æ”¹ï¼š
<æ˜¾ç¤ºæœªæäº¤æ–‡ä»¶>

è¯·è¾“å…¥ commit messageï¼ˆæˆ–ç•™ç©ºè‡ªåŠ¨ç”Ÿæˆï¼‰ï¼š
```

**å¦‚æœç”¨æˆ·è¾“å…¥æ¶ˆæ¯ï¼š**
- ç›´æ¥ä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„æ¶ˆæ¯

**å¦‚æœç”¨æˆ·ç•™ç©ºï¼š**
- è¿è¡Œæ­¥éª¤ 3 çš„è‡ªåŠ¨ç”Ÿæˆé€»è¾‘

```bash
git add -A
git commit -m "<message>"
git push
```

```
âœ… å¿«é€Ÿæäº¤å®Œæˆï¼

æäº¤ï¼š<<commit-message>>
è¿œç¨‹ï¼šå·²æ¨é€
```

## å­æµç¨‹ï¼šåˆ†æ”¯åŒæ­¥

**è§¦å‘æ¡ä»¶ï¼š**
- ç”¨æˆ·è¯´"åŒæ­¥åˆ†æ”¯"ã€"æ›´æ–°åˆ†æ”¯ä»£ç "ã€`/sync-branch`

### æ­¥éª¤ 1ï¼šä¿å­˜å½“å‰æ›´æ”¹

```bash
# æ£€æŸ¥æ˜¯å¦æœ‰æœªæäº¤æ›´æ”¹
if [ -n "$(git status --porcelain)" ]; then
  git stash push -m "ä¸´æ—¶ä¿å­˜ - $(date +%H:%M)"
fi
```

### æ­¥éª¤ 2ï¼šæ›´æ–°ä¸»åˆ†æ”¯

```bash
# è·å–å½“å‰åˆ†æ”¯
CURRENT=$(git branch --show-current)

# åˆ‡æ¢åˆ° develop åˆ†æ”¯ï¼ˆå®‰å…¨çš„ä¸»åˆ†æ”¯ï¼‰
git checkout develop

# æ‹‰å–æœ€æ–°ä»£ç 
git pull
```

### æ­¥éª¤ 3ï¼šæ‰§è¡Œ rebase

```bash
# è¿”å›åŸåˆ†æ”¯
git checkout $CURRENT

# æ‰§è¡Œ rebase onto develop
git rebase develop
```

### æ­¥éª¤ 4ï¼šå¤„ç†å†²çª

å¦‚æœæœ‰å†²çªï¼š
1. æ˜¾ç¤ºå†²çªæ–‡ä»¶åˆ—è¡¨
2. åº”ç”¨æ™ºèƒ½å†²çªè§£å†³è§„åˆ™
3. `git rebase --continue`

### æ­¥éª¤ 5ï¼šæ¢å¤ä¿å­˜çš„æ›´æ”¹

```bash
# æ¢å¤ stash
git stash pop
```

```
âœ… åˆ†æ”¯åŒæ­¥å®Œæˆï¼

å½“å‰åˆ†æ”¯ï¼š<<branch-name>>
å·²åŒæ­¥æœ€æ–°çš„ develop åˆ†æ”¯æ›´æ”¹
```

## å­æµç¨‹ï¼šåˆ†æ”¯ç®¡ç†

### åˆ›å»ºæ–°åˆ†æ”¯

**è§¦å‘æ¡ä»¶ï¼š**
- ç”¨æˆ·è¯´"åˆ›å»ºåˆ†æ”¯"ã€"æ–°å»º feature åˆ†æ”¯"

**æ­¥éª¤ 1ï¼šéªŒè¯åˆ†æ”¯å‘½å**

**è¯»å–é…ç½®è·å–åˆ†æ”¯å‘½åè§„èŒƒï¼š**

ä» session context ä¸­æŸ¥æ‰¾ `<config-detected>` æ ‡è®°ï¼Œè·å– `featureBranchPrefix`ï¼ˆé»˜è®¤ï¼š`feat/`ï¼‰ã€‚

**éªŒè¯é€»è¾‘ï¼š**

```bash
# å®šä¹‰åˆæ³•çš„å‰ç¼€åˆ—è¡¨
VALID_PREFIXES=(
    "feat/"      # æ–°åŠŸèƒ½
    "fix/"       # Bug ä¿®å¤
    "refactor/"  # ä»£ç é‡æ„
    "docs/"      # æ–‡æ¡£æ›´æ–°
    "test/"      # æµ‹è¯•ç›¸å…³
    "perf/"      # æ€§èƒ½ä¼˜åŒ–
    "style/"     # ä»£ç æ ¼å¼
    "infra/"     # åŸºç¡€è®¾æ–½/å·¥å…·é“¾
    "chore/"     # æ‚é¡¹
    "build/"     # æ„å»ºç³»ç»Ÿ
    "ci/"        # CI/CD é…ç½®
)

# éªŒè¯å‡½æ•°
validate_branch_name() {
    local branch_name="$1"
    local has_valid_prefix=false

    for prefix in "${VALID_PREFIXES[@]}"; do
        if [[ "$branch_name" == "$prefix"* ]]; then
            has_valid_prefix=true
            break
        fi
    done

    if [ "$has_valid_prefix" = false ]; then
        return 1
    fi

    # æ£€æŸ¥åˆ†æ”¯åé•¿åº¦ï¼ˆå»ºè®®ä¸è¶…è¿‡ 50 å­—ç¬¦ï¼‰
    if [ ${#branch_name} -gt 50 ]; then
        return 1
    fi

    # æ£€æŸ¥åˆ†æ”¯åæ ¼å¼ï¼ˆåªå…è®¸å°å†™å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦ã€æ–œæ ï¼‰
    if [[ ! "$branch_name" =~ ^[a-z0-9/-]+$ ]]; then
        return 1
    fi

    return 0
}
```

**å¦‚æœåˆ†æ”¯åä¸ç¬¦åˆè§„èŒƒï¼š**

```
âŒ åˆ†æ”¯åä¸ç¬¦åˆè§„èŒƒ

åˆ†æ”¯åï¼šmy-feature-branch

âœ… å»ºè®®ä½¿ç”¨ä»¥ä¸‹å‰ç¼€ï¼š
- feat/     æ–°åŠŸèƒ½å¼€å‘ï¼ˆä¾‹ï¼šfeat/user-authï¼‰
- fix/      Bug ä¿®å¤ï¼ˆä¾‹ï¼šfix/login-errorï¼‰
- refactor  ä»£ç é‡æ„ï¼ˆä¾‹ï¼šrefactor/config-systemï¼‰
- docs/     æ–‡æ¡£æ›´æ–°ï¼ˆä¾‹ï¼šdocs/api-guideï¼‰
- test/     æµ‹è¯•ç›¸å…³ï¼ˆä¾‹ï¼štest/auth-testsï¼‰
- perf/     æ€§èƒ½ä¼˜åŒ–ï¼ˆä¾‹ï¼šperf/database-queryï¼‰
- style/    ä»£ç æ ¼å¼ï¼ˆä¾‹ï¼šstyle/button-componentï¼‰
- infra/    åŸºç¡€è®¾æ–½/å·¥å…·é“¾ï¼ˆä¾‹ï¼šinfra/setup-dockerï¼‰
- chore/    æ‚é¡¹ä»»åŠ¡ï¼ˆä¾‹ï¼šchore/update-depsï¼‰
- build/    æ„å»ºç³»ç»Ÿï¼ˆä¾‹ï¼šbuild/webpack-configï¼‰
- ci/       CI/CD é…ç½®ï¼ˆä¾‹ï¼šci/github-actionsï¼‰

é€‰é¡¹ï¼š
1. é‡æ–°è¾“å…¥åˆ†æ”¯å
2. å¼ºåˆ¶åˆ›å»ºï¼ˆä¸æ¨èï¼‰
3. å–æ¶ˆ

è¯·é€‰æ‹©ï¼š
```

**å¦‚æœç”¨æˆ·é€‰æ‹©é‡æ–°è¾“å…¥ï¼š**
- è¯¢é—®æ–°çš„åˆ†æ”¯å
- é‡æ–°éªŒè¯

**å¦‚æœç”¨æˆ·é€‰æ‹©å¼ºåˆ¶åˆ›å»ºï¼š**
- ä½¿ç”¨ç”¨æˆ·è¾“å…¥çš„åˆ†æ”¯åç»§ç»­
- è®°å½•è­¦å‘Š

**æ­¥éª¤ 2ï¼šåˆ›å»ºåˆ†æ”¯**

éªŒè¯é€šè¿‡åæ‰§è¡Œï¼š

```bash
# ç¡®ä¿åœ¨ develop åˆ†æ”¯ä¸Šï¼ˆå®‰å…¨çš„åŸºç¡€åˆ†æ”¯ï¼‰
git checkout develop

# æ‹‰å–æœ€æ–°
git pull

# åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯
git checkout -b $BRANCH_NAME

# æ¨é€å¹¶è®¾ç½®ä¸Šæ¸¸
git push -u origin $BRANCH_NAME
```

**è¾“å‡ºï¼š**

```
âœ… åˆ†æ”¯åˆ›å»ºæˆåŠŸï¼

åˆ†æ”¯åï¼šfeat/user-auth
è¿œç¨‹ï¼šå·²æ¨é€åˆ° origin
```

**åˆ†æ”¯å‘½åè§„èŒƒï¼š**

| ç±»å‹ | å‰ç¼€ | ä½¿ç”¨åœºæ™¯ | ç¤ºä¾‹ |
|------|------|----------|------|
| æ–°åŠŸèƒ½ | `feat/` | æ–°å¢åŠŸèƒ½ã€ç‰¹æ€§å¼€å‘ | `feat/user-auth` |
| Bug ä¿®å¤ | `fix/` | ä¿®å¤çº¿ä¸Šæˆ–æµ‹è¯•å‘ç°çš„ Bug | `fix/login-error` |
| é‡æ„ | `refactor/` | ä»£ç é‡æ„ã€ä¸æ”¹å˜åŠŸèƒ½ | `refactor/config-system` |
| æ–‡æ¡£ | `docs/` | æ–‡æ¡£æ›´æ–°ã€README å˜æ›´ | `docs/api-guide` |
| æµ‹è¯• | `test/` | æµ‹è¯•ä»£ç æ·»åŠ æˆ–ä¿®æ”¹ | `test/auth-tests` |
| æ€§èƒ½ | `perf/` | æ€§èƒ½ä¼˜åŒ–ã€å“åº”é€Ÿåº¦æå‡ | `perf/database-query` |
| æ ·å¼ | `style/` | ä»£ç æ ¼å¼è°ƒæ•´ã€ä¸å½±å“é€»è¾‘ | `style/button-component` |
| åŸºç¡€è®¾æ–½ | `infra/` | åŸºç¡€è®¾æ–½ã€å·¥å…·é“¾ã€ç¯å¢ƒé…ç½® | `infra/setup-docker` |
| æ‚é¡¹ | `chore/` | ä¾èµ–æ›´æ–°ã€é…ç½®æ–‡ä»¶è°ƒæ•´ | `chore/update-deps` |
| æ„å»º | `build/` | æ„å»ºç³»ç»Ÿã€æ‰“åŒ…å·¥å…·é…ç½® | `build/webpack-config` |
| CI/CD | `ci/` | CI/CD æµç¨‹ã€è‡ªåŠ¨åŒ–éƒ¨ç½² | `ci/github-actions` |

### æ¸…ç†å·²åˆå¹¶åˆ†æ”¯

**è§¦å‘æ¡ä»¶ï¼š**
- ç”¨æˆ·è¯´"æ¸…ç†åˆ†æ”¯"ã€"æ¸…ç†å·²åˆå¹¶çš„åˆ†æ”¯"

**æµç¨‹ï¼š**

```bash
# åˆ—å‡ºæœ¬åœ°å·²åˆå¹¶åˆ†æ”¯
git branch --merged | grep -v "main\|develop\|master" | while read branch; do
  git branch -d "$branch"
done

# æ¸…ç†è¿œç¨‹å·²åˆ é™¤çš„åˆ†æ”¯å¼•ç”¨
git remote prune origin
```

```
âœ… åˆ†æ”¯æ¸…ç†å®Œæˆï¼

å·²åˆ é™¤ä»¥ä¸‹æœ¬åœ°åˆ†æ”¯ï¼š
- feat/old-feature
- fix/bug-123
```

## é…ç½®ç³»ç»Ÿ

### é»˜è®¤é…ç½®

```json
{
  "developBranch": "develop",
  "featureBranchPrefix": "feat/",
  "checks": {
    "typeCheck": {
      "enabled": false,
      "command": "npm run type-check",
      "autoFix": true
    },
    "lint": {
      "enabled": false,
      "command": "npm run lint",
      "autoFix": true
    },
    "test": {
      "enabled": false,
      "command": "npm test"
    }
  },
  "autoMerge": {
    "enabled": false,
    "targetBranch": "develop"
  },
  "completionStrategy": "merge",
  "conflictResolution": {
    "packageJson": "merge",
    "codeFiles": "infra-priority",
    "docs": "ours",
    "testFiles": "theirs"
  }
}
```

### é…ç½®è¯»å–

**ä¼˜å…ˆçº§ï¼š**
1. é¡¹ç›®æ ¹ç›®å½• `.workflow-config.json`
2. ç”¨æˆ·å…¨å±€é…ç½® `~/.config/horspowers/workflow-config.json`
3. é»˜è®¤é…ç½®

**ä» session context è¯»å–é…ç½®ï¼š**

åœ¨ session start æ—¶ï¼Œhook åº”è¯¥æ£€æµ‹é…ç½®å¹¶æ³¨å…¥ `<config-detected>` æ ‡è®°ï¼š

```
<config-detected>
development_mode: personal
completion_strategy: merge
develop_branch: develop
checks.typeCheck.enabled: false
checks.lint.enabled: false
</config-detected>
```

## Quick Reference

| è§¦å‘çŸ­è¯­ | åŠŸèƒ½ |
|---------|------|
| "ä¸‹ç­äº†"ã€"æäº¤ä»£ç " | æ¯æ—¥å·¥ä½œæµï¼ˆå®Œæ•´æµç¨‹ï¼‰ |
| "å¿«é€Ÿæäº¤" | è·³è¿‡æ£€æŸ¥ï¼Œç›´æ¥æäº¤ |
| "åˆå¹¶åˆ° develop" | åˆå¹¶å½“å‰åˆ†æ”¯åˆ°ç›®æ ‡åˆ†æ”¯ |
| "åŒæ­¥åˆ†æ”¯" | ä»ä¸»åˆ†æ”¯ rebase å½“å‰åˆ†æ”¯ |
| "åˆ›å»ºåˆ†æ”¯" | åˆ›å»ºæ–°çš„åŠŸèƒ½åˆ†æ”¯ |
| "æ¸…ç†åˆ†æ”¯" | åˆ é™¤å·²åˆå¹¶çš„æœ¬åœ°åˆ†æ”¯ |

## Common Mistakes

**è·³è¿‡ git status æ£€æŸ¥**
- **é—®é¢˜ï¼š** åœ¨æœ‰æœªæäº¤æ›´æ”¹æ—¶æ‰§è¡Œåˆå¹¶å¯¼è‡´æ··ä¹±
- **ä¿®å¤ï¼š** å§‹ç»ˆå…ˆæ˜¾ç¤ºå¹¶ç¡®è®¤å½“å‰çŠ¶æ€

**ä¸ä½¿ç”¨ HEREDOC æäº¤**
- **é—®é¢˜ï¼š** å¤šè¡Œ commit message æ ¼å¼é”™è¯¯
- **ä¿®å¤ï¼š** ä½¿ç”¨ `git commit -m "$(cat <<'EOF'...EOF)"`

**è‡ªåŠ¨è§£å†³æ‰€æœ‰å†²çª**
- **é—®é¢˜ï¼š** æŸäº›å†²çªéœ€è¦äººå·¥åˆ¤æ–­
- **ä¿®å¤ï¼š** åº”ç”¨æ™ºèƒ½è§„åˆ™ä½†å…è®¸ç”¨æˆ·å¹²é¢„

## Red Flags

**Never:**
- åœ¨æ£€æŸ¥å¤±è´¥æ—¶å¼ºåˆ¶æäº¤ï¼ˆé™¤éç”¨æˆ·æ˜ç¡®è¦æ±‚ï¼‰
- è‡ªåŠ¨åˆ é™¤åˆ†æ”¯è€Œä¸è¯¢é—®
- åœ¨æœ‰æœªæ¨é€æ›´æ”¹æ—¶æ‰§è¡Œ rebase

**Always:**
- æ˜¾ç¤ºå½“å‰çŠ¶æ€å¹¶ç­‰å¾…ç¡®è®¤
- ä½¿ç”¨ HEREDOC æ ¼å¼åŒ–å¤šè¡Œ commit message
- æ™ºèƒ½è§£å†³å†²çªä½†å…è®¸ç”¨æˆ·å¹²é¢„
- ä½¿ç”¨ develop ä½œä¸ºå®‰å…¨çš„ç›®æ ‡åˆ†æ”¯ï¼ˆè€Œä¸æ˜¯ mainï¼‰

## Integration

**æ›¿ä»£æ–¹æ¡ˆï¼š**
- **using-git-worktrees** - é€‚ç”¨äºå¹¶è¡Œå¤šåˆ†æ”¯å¼€å‘çš„åœºæ™¯

**é…åˆä½¿ç”¨ï¼š**
- **brainstorming** - åœ¨å¼€å§‹æ–°åŠŸèƒ½å‰è¿›è¡Œè®¾è®¡
- **finishing-a-development-branch** - ç±»ä¼¼çš„åˆ†æ”¯å®Œæˆæµç¨‹ï¼ˆä½† worktree æ„ŸçŸ¥ï¼‰

**è°ƒç”¨æ­¤æŠ€èƒ½ï¼š**
- ç”¨æˆ·æ—¥å¸¸å¼€å‘ç»“æŸæ—¶
- éœ€è¦å¿«é€Ÿæäº¤ä»£ç æ—¶
- éœ€è¦åˆå¹¶æˆ–åŒæ­¥åˆ†æ”¯æ—¶
