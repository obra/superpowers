# 任务1: 项目插件发布改造 (superpowers → horspowerss 

> **创建日期**: 2026-01-15
> **状态**: 规划中
> **优先级**: 高

---

## 📋 任务概述

将项目从上游 `obra/superpowers` 的 fork 改造为独立项目 `horspowers ，为发布到 Claude Code Marketplace 做准备。

### 改造范围

| 类别 | 需要替换的内容 |
|------|----------------|
| **项目名称** | `superpowers` → `horspowers  |
| **配置文件** | `plugin.json`, `package.json` |
| **文档引用** | README, CLAUDE.md, 技能文档 |
| **内部引用** | 代码中的命名空间、引用 |
| **品牌标识** | 图标、描述、元数据 |

---

## 🎯 详细检查清单

### 1. 配置文件改造

#### 1.1 `plugin.json`
```json
{
  "name": "horspowers ,
  "displayName": "Horspower - 中文增强的开发技能库",
  "description": "基于 Claude Code 的可组合开发工作流，专为中文用户优化",
  "author": "horsliu",
  "version": "4.1.0"
}
```

**需要检查的字段**：
- [ ] `name` - 插件唯一标识
- [ ] `displayName` - 显示名称
- [ ] `description` - 描述信息
- [ ] `author` - 作者信息
- [ ] `repository` - 仓库地址
- [ ] `homepage` - 主页地址

#### 1.2 `package.json`
```json
{
  "name": "horspowers ,
  "description": "中文增强的开发技能库",
  "repository": {
    "type": "git",
    "url": "https://github.com/LouisHors/horspowers"
  },
  "keywords": ["claude-code", "horspowers , "中文", "workflow"]
}
```

#### 1.3 NPM 配置
- [ ] 检查是否需要重命名 NPM package（如果发布到 NPM）
- [ ] 更新 `bugs.url`
- [ ] 更新 `homepage`

---

### 2. 文档改造

#### 2.1 根目录文档
- [ ] `README.md` - 主 README
  - [ ] 项目名称和描述
  - [ ] 仓库链接
  - [ ] 徽章 (badges)
  - [ ] 安装指令中的包名
  - [ ] 示例命令中的命名空间

- [ ] `CLAUDE.md` - Claude 指导文件
  - [ ] 项目名称引用
  - [ ] 技能命名空间说明 (`superpowers:` → `horspowers:`)

#### 2.2 技能文档
所有 `skills/*/SKILL.md` 文件中的：
- [ ] `superpowers:` 命名空间引用
- [ ] 项目名称提及
- [ ] 示例代码中的引用

**受影响的技能**：
```
skills/
├── brainstorming/SKILL.md
├── using-superpowers/SKILL.md  ← 特别注意
├── writing-plans/SKILL.md
├── test-driven-development/SKILL.md
├── subagent-driven-development/SKILL.md
└── ...
```

#### 2.3 其他文档
- [ ] `docs/README.codex.md`
- [ ] `docs/README.opencode.md`
- [ ] `docs/testing.md`
- [ ] `RELEASE-NOTES.md`

---

### 3. 代码改造

#### 3.1 技能引用系统
检查代码中是否有硬编码的 `superpowers` 引用：

**需要搜索的模式**：
```bash
# 搜索这些模式
grep -r "superpowers:" skills/
grep -r "obra/superpowers" .
grep -r "superpowers" lib/
```

**需要保留的引用**：
- MIT License 中的原始项目归属
- 代码注释中对上游的致谢

#### 3.2 Hook 脚本
- [ ] `hooks/session-start.sh` - 检查技能注入逻辑
- [ ] `hooks/hooks.json` - 检查配置

#### 3.3 JavaScript/TypeScript 代码
```bash
# 检查 lib/ 目录
lib/skills-core.js  # Codex/OpenCode 支持
```

---

### 4. 品牌标识

#### 4.1 图标和资源
- [ ] 检查是否有图标资源需要替换
- [ ] 检查 Marketplace 展示图（如果有）

#### 4.2 元数据描述
更新所有面向用户的描述：
- [ ] Marketplace 描述
- [ ] README 中的功能介绍
- [ ] 技能触发条件描述

---

### 5. 许可证合规

#### 5.1 MIT License 要求
✅ **必须保留**：
- 原始 MIT License 文件
- 原项目版权声明
- NOTICE 文件（如果需要）

**建议添加**：
```
NOTICE

此项目基于 obra/superpowers (https://github.com/obra/superpowers)
Original Copyright (c) 2024 obra
Modifications Copyright (c) 2026 horsliu

本项目在 MIT License 下发布
```

#### 5.2 Package.json 许可证
- [ ] 确认 `license` 字段为 `"MIT"`

---

## 📝 执行步骤

### Phase 1: 准备阶段
1. 创建发布分支 `git checkout -b prep/release-horspowers 
2. 备份关键文件
3. 创建检查清单追踪文档

### Phase 2: 配置文件改造
1. 更新 `plugin.json`
2. 更新 `package.json`
3. 更新 NPM 相关配置

### Phase 3: 文档改造
1. 更新 README.md
2. 更新 CLAUDE.md
3. 批量更新技能文档中的命名空间引用
4. 更新其他文档

### Phase 4: 代码审查
1. 搜索所有 `superpowers` 引用
2. 分类处理：保留/修改/删除
3. 测试技能系统是否正常工作

### Phase 5: 品牌更新
1. 更新项目描述和元数据
2. 准备 Marketplace 展示材料
3. 添加 NOTICE 文件

### Phase 6: 验证测试
1. 运行所有技能测试
2. 验证插件加载
3. 测试技能调用
4. 检查文档链接

### Phase 7: 发布准备
1. 更新版本号
2. 编写 Release Notes
3. 准备 Marketplace 提交

---

## 🔍 搜索和替换策略

### 批量替换脚本
```bash
#!/bin/bash
# ⚠️ 使用前请仔细检查！

# 1. 查找所有需要检查的文件
grep -r "superpowers" \
  --exclude-dir=node_modules \
  --exclude-dir=.git \
  --exclude="*.log" \
  . > /tmp/superpowers-references.txt

# 2. 人工审查后再替换
# 查看结果：
cat /tmp/superpowers-references.txt

# 3. 安全替换（示例 - 需要仔细验证）
find . -type f \( -name "*.md" -o -name "*.json" \) \
  -not -path "./node_modules/*" \
  -not -path "./.git/*" \
  -exec sed -i '' 's/superpowers:skill-name:/horspowers:skill-name:/g' {} +
```

### 需要特别小心的地方
1. **License 文件** - 不要修改
2. **Git 历史** - 不要重写历史
3. **外部引用链接** - 某些可能需要保留
4. **代码示例** - 确保示例仍然有效

---

## ✅ 验证清单

完成改造后，验证以下内容：

### 基础功能
- [ ] 插件可以在 Claude Code 中加载
- [ ] 技能列表正常显示
- [ ] 技能可以正常调用
- [ ] 所有测试通过

### 文档一致性
- [ ] 所有文档链接有效
- [ ] 命名空间引用统一
- [ ] 示例代码可运行

### 发布就绪
- [ ] 版本号已更新
- [ ] Release Notes 已准备
- [ ] Marketplace 描述完整
- [ ] 许可证信息正确

---

## 📌 注意事项

1. **License 合规性**：MIT License 允许修改和再发布，但需要：
   - 保留原始 License
   - 保留版权声明
   - 声明修改内容

2. **向后兼容**：考虑是否需要保留 `superpowers:` 别名支持

3. **测试覆盖**：改造后必须运行完整测试套件

4. **渐进式替换**：建议分阶段进行，每次提交后验证

5. **文档同步**：确保 README 和 CLAUDE.md 中的引用同步更新

---

## 📚 参考资料

- [Claude Code Plugin Documentation](https://github.com/anthropics/claude-code)
- [MIT License Text](https://opensource.org/licenses/MIT)
- [Upstream Repository](https://github.com/obra/superpowers)

---

**创建日期**: 2026-01-15
**预计完成**: TBD
